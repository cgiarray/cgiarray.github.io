---
import HamburgerToggle from '../components/hamburgerToggle.astro';
import SearchToggle from '../components/SearchToggle.astro';
---

<div class="header-wrapper">
  <!-- Row 1: Logo + Search Toggle on Left + Hamburger on Right -->
  <div class="logo-row">
    <div class="left-group">
      <!-- Logo -->
      <a href="/" aria-label="Home" class="logo-link">
        <img src="/images/web-logo.png" alt="CGIArray Logo" class="logo" />
      </a>

      <!-- Mobile Search Toggle Button (magnifier icon) -->
      <button id="search-toggle-button" class="search-toggle-button" aria-label="Toggle search">
        <i class="fas fa-search"></i>
      </button>
    </div>

    <!-- Hamburger Icon: keep this outside left-group, on right -->
    <button id="hamburger-toggle" class="hamburger-button" aria-label="Toggle menu" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- Search Bar: Outside logo-row, toggled visible on mobile or always on desktop -->
  <div class="search-bar" id="search-bar" role="search" aria-label="Site search">
    <select class="search-category" aria-label="Search category">
      <option value="all">All</option>
      <option value="templates">Templates</option>
      <option value="3d-assets">3D Assets</option>
      <option value="plugins">Plugins</option>
      <option value="animations">Animations</option>
    </select>
    <input
      id="search-input"
      type="search"
      placeholder="Search..."
      class="search-input-bar"
      aria-label="Search site content"
    />
    <button id="search-submit-button" class="search-button" aria-label="Submit search">
      <i class="fas fa-search"></i>
    </button>
  </div>

  <!-- Navigation Menu -->
  <nav role="navigation" aria-label="Main navigation" id="main-nav">
    <ul class="nav-links">
      <li><a href="/"><i class="fas fa-house"></i></a></li>

      <li class="dropdown">
        <a href="/animations" aria-haspopup="true" aria-expanded="false">Animations</a>
        <ul class="dropdown-menu" aria-label="submenu">
          <li><a href="#"><i class="fas fa-sync-alt loop-icon"></i> Loops</a></li>
          <li><a href="#"><i class="fas fa-random"></i> Transitions</a></li>
          <li><a href="#"><i class="fas fa-magic"></i> Effects</a></li>
        </ul>
      </li>

      <li class="dropdown">
        <a href="/assets" aria-haspopup="true" aria-expanded="false">3D Assets</a>
        <ul class="dropdown-menu" aria-label="submenu">
          <li><a href="#"><i class="fas fa-user-astronaut"></i> Characters</a></li>
          <li><a href="#"><i class="fas fa-cubes"></i> Props</a></li>
        </ul>
      </li>

      <li class="dropdown">
        <a href="/templates" aria-haspopup="true" aria-expanded="false">Templates</a>
        <ul class="dropdown-menu" aria-label="submenu">
          <li><a href="#"><span class="app-icon ae-icon">Ae</span> Adobe After Effects</a></li>
          <li><a href="#"><span class="app-icon pr-icon">Pr</span> Adobe Premiere Pro</a></li>
          <li><a href="#"><span class="app-icon c4d-icon">M</span> Maxon Cinema 4D</a></li>
        </ul>
      </li>

      <li><a href="/plugins">Plugins</a></li>
      <li><a href="/tutorials">Tutorials</a></li>
      <li><a href="/about">About</a></li>
      <li><a href="/contact">Contact</a></li>
      <li><a href="/licensing">Licensing</a></li>
    </ul>
  </nav>

  <!-- Scripts -->
  <HamburgerToggle />
  <SearchToggle />
</div>
